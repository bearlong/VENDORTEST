(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{5593:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Application",function(){return t(6725)}])},6725:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return F}});var a=t(5893),i=t(7294),c=t(5675),l=t.n(c),n=t(1664),s=t.n(n),d=t(6305),o=t.n(d),p=JSON.parse('[{"id":"T166","nameEn":"CRISIS","nameZh":"中文"},{"id":"T180","nameEn":"PARA LIGHT","nameZh":"光鼎"},{"id":"T100","nameEn":"Vendor A","nameZh":"A"},{"id":"T101","nameEn":"Vendor B","nameZh":"B"}]'),u=JSON.parse('[{"id":1,"vendor":"T166","parts":"3310010019P-R00","description":"LED L-4B3HD-HF9.7-21mm RED LONG","lastPutPrice":3000,"currencyOld":"NTD"},{"id":2,"vendor":"T166","parts":"3310010029P-R00","description":"LED L-4B3HD-HF10-14 RED 5.0X2.0X7.6MM","lastPutPrice":1000,"currencyOld":"EUR"},{"id":3,"vendor":"T166","parts":"3310010039P-R00","description":"LED L-4B3HD-HF14.5-18.5 RED LK5.08","lastPutPrice":1000,"currencyOld":"USD"},{"id":4,"vendor":"T166","parts":"3310010049P-R00","description":"LED L-4B3HD-HF12.4-16.4 RED 5.0X2.0X7.6mm","lastPutPrice":1050,"currencyOld":"NTD"},{"id":5,"vendor":"T166","parts":"3310010059O-R00","description":"LED RED L314HD LS2.54mm","lastPutPrice":5000,"currencyOld":"NTD"},{"id":6,"vendor":"T166","parts":"3310010059P-R00","description":"LED L-314HD-HTS RED LS2.54","lastPutPrice":15000,"currencyOld":"USD"},{"id":7,"vendor":"T166","parts":"3310010019P-R00","description":"LED L-4B3HD-HF9.7-21mm RED LONG","lastPutPrice":2000,"currencyOld":"EUR"},{"id":8,"vendor":"T166","parts":"331001005TP-R00","description":"LED L-314HD-TRFHJ RED T5","lastPutPrice":80,"currencyOld":"USD"},{"id":9,"vendor":"T166","parts":"3310010089P-R00","description":"LED L-2P4HC-HTS RED LS2.54","lastPutPrice":7000,"currencyOld":"EUR"},{"id":10,"vendor":"T166","parts":"3310010099P-R00","description":"LED L-314HT-HF15.7-22.2 RED LK5.08","lastPutPrice":1000,"currencyOld":"USD"},{"id":11,"vendor":"T166","parts":"331001201RP-R00","description":"LED L-413HD-TRS270 RED T2.5","lastPutPrice":10000,"currencyOld":"NTD"},{"id":12,"vendor":"T166","parts":"331001202TP-R00","description":"LED L-4B3HD-TRF270K-HF19.05 RED K5","lastPutPrice":200,"currencyOld":"USD"},{"id":13,"vendor":"T166","parts":"3310012039P-R00","description":"LED L-4B3HD-HF17-21mm 5.0X2.0X6.0 RED CK5","lastPutPrice":8000,"currencyOld":"NTD"},{"id":14,"vendor":"T180","parts":"3319999999","description":"test123123","lastPutPrice":500,"currencyOld":"EUR"},{"id":15,"vendor":"T180","parts":"33177777777","description":"test444568","lastPutPrice":500,"currencyOld":"EUR"},{"id":16,"vendor":"T100","parts":"3310010SDSDSD0","description":"LEASDASDASD","lastPutPrice":300,"currencyOld":"NTD"},{"id":17,"vendor":"T101","parts":"331001DFDSFSGP-R00","description":"LDDDDDDDDDD","lastPutPrice":10,"currencyOld":"USD"}]'),m=t(3572),h=t(2294),y=t(2902),x=t(3925),j=t(3671),D=t(5435),v=t(9739),P=t(5601),b=t(1654),E=t(6685),g=t(2532),N=t(8848),f=t(8706),C=t(6035),T=t(893),R=t(3756),S=t(6455),L=t.n(S);function F(){let[e,r]=(0,i.useState)(!1),[t,c]=(0,i.useState)([]),[n,d]=(0,i.useState)({}),[S,F]=(0,i.useState)([]),[_,O]=(0,i.useState)([]),[k,H]=(0,i.useState)(null),[w,U]=(0,i.useState)([]),[A,B]=(0,i.useState)(null),M={USD:{USD:1,EUR:.91,NTD:30.25},EUR:{USD:1.1,EUR:1,NTD:33.33},NTD:{USD:.033,EUR:.03,NTD:1}},V=[{key:"id",label:"item",_props:{scope:"col"}},{key:"Factory",_props:{scope:"col"}},{key:"Brand",label:"Brand",_props:{scope:"col"}},{key:"Vendor",label:"Vendor",_props:{scope:"col"}},{key:"Parts",label:"Parts",_props:{scope:"col"}},{key:"Deacription",label:"Deacription",_props:{scope:"col"}},{key:"OrderSharerate",label:"Order Sharerate (%)",_props:{className:"".concat(o().ch7),scope:"col"}},{key:"LastPutPrice",label:"Last Put Price",_props:{scope:"col"}},{key:"CurrencyOld",label:"Currency",_props:{scope:"col"}},{key:"UnitPrice",label:"Unit Price",_props:{scope:"col"}},{key:"CurrencyNew",label:"Currency",_props:{scope:"col"}},{key:"Rate",label:"Rate",_props:{scope:"col"}},{key:"EffectiveDate",label:"Effective Date (yyyy/mm/dd)",_props:{className:"".concat(o().dateInput),scope:"col"}},{key:"EffectiveRemark",label:"Effective Remark",_props:{scope:"col"}},{key:"CostDown",label:"Cost Down (%)",_props:{className:"".concat(o().ch7),scope:"col"}},{key:"Moq",label:"Moq",_props:{scope:"col"}},{key:"Mpq",label:"Mpq",_props:{scope:"col"}},{key:"LeadTime",label:"LeadTime",_props:{scope:"col"}},{key:"AttachFile",label:"Attach File",_props:{scope:"col"}}],q=[{id:1,label:"PHC",value:"PHC"},{id:2,label:"PHP",value:"PHP"},{id:3,label:"PHS",value:"PHS"},{id:4,label:"PHT",value:"PHT"},{id:5,label:"PHTJ",value:"PHTJ"},{id:6,label:"PHZ",value:"PHZ"},{id:7,label:"固昌",value:"固昌"},{id:8,label:"冠盈",value:"冠盈"}],I=(e,r,a)=>{c(t.map(t=>t.id===e?{...t,[r]:a}:t))},K=()=>{Z()&&(c(t.map(e=>({...e,isEdit:!1}))),r(!1))},Z=()=>!t.some(e=>e.isEdit&&Object.keys(e).some(r=>"AttachFile"!==r&&!e[r]))||(L().fire({title:"Please ensure all fields are filled in.",text:"All fields are required except for the attachment.",icon:"error"}),!1),X=(e,r)=>{var a;let i;let l=(null===(a=t.find(r=>r.id===e))||void 0===a?void 0:a.Factory)||"",n=l.split(",").map(e=>e.trim());i=(i=n.includes(r)?n.filter(e=>e!==r).join(","):n.length?"".concat(l,",").concat(r):r).replace(/^,|,$/g,""),c(t.map(r=>r.id===e?{...r,Factory:i}:r))},J=e=>{F(G(p,e))},G=(e,r)=>e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(r.toLowerCase()))),Y=e=>{"Enter"===e.key&&J(e.target.value)},z=e=>{"Enter"===e.key&&Q(e)},Q=e=>{let r=Number(e.target.id);c(e=>e.map(e=>{if(e.id===r){var t;let r=(null===(t=M[e.CurrencyOld])||void 0===t?void 0:t[e.CurrencyNew])||0,a=$(Number(e.LastPutPrice),Number(e.UnitPrice),r);return{...e,Rate:r,CostDown:0===a?0:parseFloat(a).toFixed(2)}}return e}))},$=(e,r,t)=>0===e?0:((e*t-r)/(e*t)*100).toFixed(2),W=e=>{H(e)},ee=()=>{k&&U(e=>[...e,"(".concat(k.id,")").concat(k.nameEn,"(").concat(k.nameZh,")")])},er=()=>{let e=w.map(e=>{let r=e.match(/\(([^)]+)\)/);return r?r[1]:null}).filter(Boolean);O(u.filter(r=>e.includes(r.vendor)))},et=()=>{d(!1),F([]),H(null),U([]),B(null)},ea=e=>{B(e)},ei=(e,r)=>{let a=_.find(e=>e.id===r),i=p.find(e=>e.id===a.vendor);c(t.map(r=>r.id===e?{...r,Vendor:"(".concat(i.id,")").concat(i.nameEn),Parts:a.parts,Deacription:a.description,LastPutPrice:a.lastPutPrice,CurrencyOld:a.currencyOld}:r)),et()},ec=e=>{d(r=>({...r,[e]:!0}))},el=e=>{d(r=>({...r,[e]:!1}))};return(0,i.useEffect)(()=>{er()},[w]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("main",{className:"bg",children:[(0,a.jsxs)("div",{className:" m-0  fw-bold d-flex justify-content-end align-items-end",children:[(0,a.jsx)(m.u,{className:"me-5",color:"primary",size:"lg",children:"Primary"}),(0,a.jsx)(s(),{className:"h4 m-0 me-5",href:"#",children:"User Help"})]}),(0,a.jsx)("div",{className:" px-4 pt-5 container d-flex justify-content-center",children:(0,a.jsxs)("div",{className:"d-inline-block text-center",children:[(0,a.jsxs)("h1",{className:"display-4 fw-bold text-center primary d-flex justify-content-center align-items-center mb-3",children:[(0,a.jsx)(l(),{className:"me-2 ",src:"/my-app/img/logo.png",width:30,height:30,alt:"logo"}),"VENDOR Compare Price Application Form"]}),(0,a.jsx)("h3",{className:"text-end mb-5",children:"Date： 2024/11/18"}),(0,a.jsxs)(h.K,{className:"border h3 border-3",children:[(0,a.jsxs)(y.r,{children:[(0,a.jsx)(x.b,{className:"".concat(o().hlColor," py-4 border border-3"),children:"Application No."}),(0,a.jsx)(x.b,{className:"py-4 border border-3",children:"申請單編號"}),(0,a.jsx)(x.b,{className:"".concat(o().hlColor," py-4 border border-3"),children:"Sourcer"}),(0,a.jsx)(x.b,{className:"py-4 border border-3",children:"申請人"})]}),(0,a.jsxs)(y.r,{children:[(0,a.jsx)(x.b,{className:"".concat(o().hlColor," py-5 border border-3"),children:"MEMO"}),(0,a.jsx)(x.b,{className:"p-0 border border-3",xs:9,children:(0,a.jsx)("textarea",{className:"w-100 px-2",name:"",id:"",rows:4,style:{resize:"none",overflow:"auto"}})})]})]})]})}),(0,a.jsx)("div",{className:"container mb-5",children:(0,a.jsxs)(j.Z,{className:" mx-5",role:"group","aria-label":"Basic example",size:"lg",children:[(0,a.jsx)(m.u,{color:"secondary",children:"ADD Multiple ITEM"}),(0,a.jsx)(m.u,{color:"secondary",children:"ADD Multiple VENDOR"}),(0,a.jsx)(m.u,{color:"secondary",onClick:()=>{let e=t.length+1;c([...t,{id:e,Factory:"",Brand:"",Vendor:"",Parts:"",Deacription:"",OrderSharerate:"",LastPutPrice:"",CurrencyOld:"NTD",UnitPrice:"",CurrencyNew:"NTD",Rate:"",EffectiveDate:"",EffectiveRemark:"",CostDown:"",Moq:"",Mpq:"",LeadTime:"",AttachFile:"",isEdit:!0,_cellProps:{id:{scope:"row"}}}]),r(!0)},children:"ADD ITEM"}),(0,a.jsx)(m.u,{color:"secondary",children:"Cancel Apply"}),(0,a.jsx)(m.u,{color:"secondary",children:"New Apply"})]})}),(0,a.jsx)(D.S,{className:"h5 text-center ".concat(o().formApplication," mb-5"),columns:V,items:t.map(e=>{var r;return{...e,Factory:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"d-flex justify-content-center align-items-center position-relative",children:[(0,a.jsx)(v.j,{type:"text",value:(null===(r=t.find(r=>r.id===e.id))||void 0===r?void 0:r.Factory)||"",onChange:r=>{I(e.id,"Factory",r.target.value)}}),(0,a.jsx)(P.K,{className:o().factoryList,content:q.map(r=>{var i,c;return(0,a.jsx)(b.E,{type:"checkbox",className:"h5",name:"Factory".concat(e.id,"_").concat(r.id),id:"Factory".concat(e.id,"_").concat(r.id),label:r.label,value:r.value,onChange:r=>X(e.id,r.target.value),checked:null===(c=t.find(r=>r.id===e.id))||void 0===c?void 0:null===(i=c.Factory)||void 0===i?void 0:i.split(",").includes(r.value)},r.id)}),title:"Factory List",placement:"right",children:(0,a.jsx)(m.u,{color:"primary",children:"Select"})})]})}):e.Factory||"",Brand:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"d-flex h-100 justify-content-center align-items-center",children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"Brand",r.target.value)})})}):e.Brand||"",Vendor:e.isEdit?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex  justify-content-center align-items-center",children:[(0,a.jsx)(v.j,{type:"text",disabled:!0,onChange:r=>I(e.id,"Vendor",r.target.value),value:e.Vendor}),(0,a.jsxs)(j.Z,{role:"group","aria-label":"Basic example",children:[(0,a.jsx)(m.u,{color:"primary",onClick:()=>ec(e.id),children:"Select"}),(0,a.jsx)(m.u,{color:"primary",children:"Del"})]})]}),(0,a.jsxs)(E.T,{alignment:"center",visible:!!n[e.id],onClose:()=>el(e.id),"aria-labelledby":"model".concat(e.id),backdrop:"static",children:[(0,a.jsx)(g.p,{className:"text-center",closeButton:!1,children:(0,a.jsx)(N.f,{id:"model".concat(e.id),className:"primary h3 ",children:"Select Vendor Form"})}),(0,a.jsxs)(f.s,{children:[(0,a.jsxs)("div",{className:"mb-2 border  border-1 p-2 border-secondary-subtle",children:[(0,a.jsx)("h4",{className:"primary",children:"Input Vendor List"}),(0,a.jsx)(C.P,{id:"inputVendor".concat(e.id),rows:3,disabled:!0,value:w.join("\n")})]}),(0,a.jsxs)("div",{className:"mb-2 border  border-1 p-2 border-secondary-subtle",children:[(0,a.jsx)("h4",{className:"primary",children:"Search Vendor Name"}),(0,a.jsxs)("span",{children:["(Search EX:"," ",(0,a.jsx)("span",{className:"text-primary",children:"TOKYO PARTS(東京元件)"})," ","Search Input: ",(0,a.jsx)("span",{className:"text-danger",children:"T*"}),(0,a.jsx)("span",{className:"text-danger-emphasis",children:"ENTER"})," )"]}),(0,a.jsx)(v.j,{type:"text",onKeyDown:Y})]}),(0,a.jsxs)("div",{className:"mb-2 border  border-1 p-2 border-secondary-subtle",children:[(0,a.jsx)("h4",{className:"primary",children:"Select Vendor"}),S.map((r,t)=>(0,a.jsx)(b.E,{type:"radio",name:"vendor".concat(e.id),id:"vendor".concat(t,"_").concat(e.id),label:"(".concat(r.id,")").concat(r.nameEn,"(").concat(r.nameZh,")"),value:r.id,onChange:()=>{W(r)},checked:(null==k?void 0:k.id)===r.id},r.id))]}),(0,a.jsxs)("div",{className:"mb-2 border  border-1 p-2 border-secondary-subtle",children:[(0,a.jsx)("h4",{className:"primary",children:"Select Parts"}),_.map((r,t)=>(0,a.jsx)(b.E,{type:"radio",name:"parts".concat(e.id),id:"parts".concat(t,"_").concat(e.id),value:r.id,label:(0,a.jsxs)(a.Fragment,{children:[r.parts,(0,a.jsxs)("span",{style:{color:"blue"},children:[" ","(",r.description,")"]})]}),onChange:()=>{ea(r.id)},checked:A===r.id},t))]})]}),(0,a.jsxs)(T.Y,{children:[(0,a.jsx)(m.u,{color:"secondary",onClick:()=>{et()},children:"Close"}),(0,a.jsx)(m.u,{color:"primary",onClick:()=>{ee(),console.log(e)},children:"ADD Vendor"}),(0,a.jsx)(m.u,{color:"primary",onClick:()=>{ei(e.id,A)},children:"Send OK"})]})]})]}):e.Vendor||"",Parts:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"Parts",r.target.value),value:e.Parts})}):e.Parts||"",Deacription:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"Deacription",r.target.value),value:e.Deacription})}):e.Deacription||"",OrderSharerate:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"OrderSharerate",r.target.value)})}):e.OrderSharerate||"",LastPutPrice:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"LastPutPrice",r.target.value),value:e.LastPutPrice})}):e.LastPutPrice||"",CurrencyOld:e.isEdit?(0,a.jsx)(R.L,{"aria-label":"Default select example",options:[{label:"NTD",value:"NTD"},{label:"EUR",value:"EUR"},{label:"USD",value:"USD"}],onChange:r=>I(e.id,"CurrencyOld",r.target.value),value:e.CurrencyOld}):e.CurrencyOld||"",UnitPrice:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",id:e.id.toString(),onChange:r=>I(e.id,"UnitPrice",r.target.value),onKeyDown:z})}):e.UnitPrice||"",CurrencyNew:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(R.L,{"aria-label":"Default select example",options:[{label:"NTD",value:"NTD"},{label:"EUR",value:"EUR"},{label:"USD",value:"USD"}],onChange:r=>I(e.id,"CurrencyNew",r.target.value),value:e.CurrencyNew})}):e.CurrencyNew||"",Rate:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",maxLength:5,style:{width:"7ch"},onChange:r=>I(e.id,"Rate",r.target.value),value:M[e.CurrencyOld][e.CurrencyNew]||"",disabled:!0})}):e.Rate||"",EffectiveDate:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"date",onChange:r=>I(e.id,"EffectiveDate",r.target.value)})}):e.EffectiveDate||"",EffectiveRemark:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"EffectiveRemark",r.target.value)})}):e.EffectiveRemark||"",CostDown:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"CostDown",r.target.value),value:e.CostDown})}):e.CostDown||"",Moq:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",style:{width:"7ch"},onChange:r=>I(e.id,"Moq",r.target.value)})}):e.Moq||"",Mpq:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",style:{width:"7ch"},onChange:r=>I(e.id,"Mpq",r.target.value)})}):e.Mpq||"",LeadTime:e.isEdit?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.j,{type:"text",onChange:r=>I(e.id,"LeadTime",r.target.value)})}):e.LeadTime||"",AttachFile:e.isEdit?(0,a.jsx)("div",{className:"d-flex  justify-content-center align-items-center",children:(0,a.jsx)(v.j,{type:"file",id:"formFileSm",onChange:r=>I(e.id,"AttachFile",r.target.value)})}):e.AttachFile||"",_cellProps:{id:{scope:"row"}}}}),bordered:!0,borderColor:"dark",tableHeadProps:{color:"primary"},color:"light"}),(0,a.jsxs)("div",{className:"d-flex gap-5 justify-content-center",children:[(0,a.jsx)(m.u,{color:"secondary",className:"".concat(o().ch15," m-0"),onClick:()=>{e&&K()},children:e?"ADD Item":"SEND"}),(0,a.jsx)(m.u,{color:"secondary",className:o().ch15,children:e?"Bom":"Exit"})]})]})})}},6305:function(e){e.exports={hlColor:"application_hlColor__EFvYM",formApplication:"application_formApplication__6PsRu",dateInput:"application_dateInput__bEHv2",ch7:"application_ch7__fgU_r",ch15:"application_ch15__oYPQ4",factoryList:"application_factoryList__Ju8B3"}}},function(e){e.O(0,[166,804,741,302,888,774,179],function(){return e(e.s=5593)}),_N_E=e.O()}]);